(()=>{var e=window.jQuery;function o(){if(!e(".media-modal .wp-adminify--modal-folder-container").length){var o=Date.now(),i="wp-adminify--folder-app-modal-"+o,n=e("<div>",{id:"wp-adminify--modal-folder-container-"+o,class:"wp-adminify--modal-folder-container"}),a=e("<div>",{id:i});n.append(a);var d=e(".media-modal .media-frame-menu .media-menu #menu-item-library");if(d.length)d.before(n);else{var t=e(".media-modal .media-frame-menu .media-menu");if(!t.length)return;t.append(n)}setTimeout((function(){"function"==typeof window.wpAdminifyInitFolderModule&&window.wpAdminifyInitFolderModule(!0,i)}),50)}}window.wpAdminifyModalRoots=window.wpAdminifyModalRoots||new Map,e((function(){i()}));var i=function(){if("undefined"!=typeof wp&&wp.media&&wp.media.view){var i=window.wp_adminify__folder_data;if(i&&i.folders){var n=wp.media.view.AttachmentsBrowser;wp.media.view.AttachmentsBrowser=n.extend({createSidebar:function(){n.prototype.createSidebar.apply(this,arguments),this.controller&&this.controller.$el&&this.controller.$el.hasClass("wp-core-ui")&&setTimeout((function(){o()}),300)}});var a=wp.media.view.Modal.prototype.open;wp.media.view.Modal.prototype.open=function(){var e=a.apply(this,arguments);return setTimeout((function(){o()}),300),e},setInterval((function(){var e=document.querySelector(".media-modal");e&&null!==e.offsetParent&&!e.querySelector(".wp-adminify--modal-folder-container")&&o()}),1e3),e(document).on("click",".media-modal-close",(function(){var o=window.wpAdminifyModalRoots;o&&o.size>0&&(o.forEach((function(e,o){try{e.unmount();var i=document.getElementById(o);i&&i.remove()}catch(e){console.warn("Error unmounting React root:",e)}})),o.clear()),e(".wp-adminify--modal-folder-container").remove()}))}}}})();